(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{435:function(t,a,s){"use strict";s.r(a);var e=s(11),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react-native"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-native"}},[t._v("#")]),t._v(" React Native")]),t._v(" "),s("p",[t._v("You can import the MetaMask SDK into your React Native app to enable your users to easily connect with their MetaMask Mobile wallet. The SDK will automatically deeplink your users into their MetaMask Mobile wallet and once users accept the connection, they will be redirected back automatically to your app. This will happen for all actions that need user approval.")]),t._v(" "),s("h3",{attrs:{id:"installation-specifics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation-specifics"}},[t._v("#")]),t._v(" Installation specifics")]),t._v(" "),s("h4",{attrs:{id:"_1-install-rn-nodeify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-install-rn-nodeify"}},[t._v("#")]),t._v(" 1. Install "),s("a",{attrs:{href:"https://github.com/tradle/rn-nodeify",target:"_blank",rel:"noopener noreferrer"}},[t._v("rn-nodeify"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" --dev rn-nodeify\nor\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i --dev rn-nodeify\n")])])]),s("h4",{attrs:{id:"_2-install-rn-nodeify-libraries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-install-rn-nodeify-libraries"}},[t._v("#")]),t._v(" 2. Install rn-nodeify libraries")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-crypto\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-randombytes\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" crypto\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" process\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" stream\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" events\n")])])]),s("h4",{attrs:{id:"_3-insert-rn-nodeify-post-install-script-into-package-json-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-insert-rn-nodeify-post-install-script-into-package-json-scripts"}},[t._v("#")]),t._v(" 3. Insert rn-nodeify post install script into "),s("code",[t._v("package.json")]),t._v(" -> "),s("code",[t._v('"scripts"')])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postinstall"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"rn-nodeify --install 'crypto,process,stream,events' --hack\"")]),t._v("\n")])])]),s("h4",{attrs:{id:"_4-import-rn-nodeify-shim-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-import-rn-nodeify-shim-js"}},[t._v("#")]),t._v(" 4. Import rn-nodeify shim.js")]),t._v(" "),s("p",[t._v("rn-nodeify will create a shim.js file in your project root directory. You should import it in the root file of your application.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./shim'")]),t._v("\n")])])]),s("h4",{attrs:{id:"_5-install-react-native-background-timer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-install-react-native-background-timer"}},[t._v("#")]),t._v(" 5. Install react-native-background-timer")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-background-timer\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ios "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" pod "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n")])])]),s("h4",{attrs:{id:"_6-install-the-metamask-sdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-install-the-metamask-sdk"}},[t._v("#")]),t._v(" 6. Install the MetaMask SDK")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @metamask/sdk\n")])])]),s("h4",{attrs:{id:"_7-run-postinstall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-run-postinstall"}},[t._v("#")]),t._v(" 7. Run postinstall")]),t._v(" "),s("p",[t._v("Make sure you run the postinstall script after everything is installed")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" postinstall\n")])])]),s("h4",{attrs:{id:"_8-install-pods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-install-pods"}},[t._v("#")]),t._v(" 8. Install pods")]),t._v(" "),s("p",[t._v("Finally install the necessary pods that came with the libraries")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ios "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" pod "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n")])])]),s("p",[t._v("Now you should be able to use the MetaMask SDK!")]),t._v(" "),s("h4",{attrs:{id:"use-the-sdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-the-sdk"}},[t._v("#")]),t._v(" Use the SDK")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MetaMaskSDK "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@metamask/sdk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Linking "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-native'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BackgroundTimer "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-native-background-timer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MMSDK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MetaMaskSDK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("openDeeplink")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Linking"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("openURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Use React Native Linking method or your favourite way of opening deeplinks")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" BackgroundTimer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// To keep the app alive once it goes to background")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dappMetadata")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'My App'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The name of your application")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://myapp.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The url of your website")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ethereum "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MMSDK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProvider")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" accounts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eth_requestAccounts'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("For a list of possible "),s("code",[t._v("options")]),t._v(" check "),s("RouterLink",{attrs:{to:"/metamask-sdk-js/metamask-sdk-js-options.html"}},[t._v("here")])],1),t._v(" "),s("p",[t._v("It's now possible to use "),s("a",{attrs:{href:"https://docs.ethers.io/v5/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("EthersJS"),s("OutboundLink")],1),t._v(" with your React Native app!")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("providers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Web3Provider")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get the balance of an account (by address or ENS name, if supported by network)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ethereum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selectedAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Often you need to format the output to something more user-friendly,")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// such as in ether (instead of wei)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" balanceInETH "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ethers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("formatEther")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("balance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '0.182826475815887608'")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("You should always call "),s("code",[t._v("eth_requestAccounts")]),t._v(" first--that is what prompts the deeplinking into MetaMask Mobile for connection!")]),t._v(" "),s("p",[t._v("For other possible methods, check "),s("RouterLink",{attrs:{to:"/ethereum-provider.html"}},[t._v("the Ethereum Provider API")])],1)]),t._v(" "),s("p",[t._v("That's it!")]),t._v(" "),s("p",[t._v("NOTE: We are working on creating a "),s("code",[t._v("metamask-react-native-sdk")]),t._v(" package that will install all of this automatically which will make the installation much easier for React Native apps.")]),t._v(" "),s("h3",{attrs:{id:"recordings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recordings"}},[t._v("#")]),t._v(" Recordings")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://recordit.co/FClppLgWzT",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Native app"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"react-native-examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-native-examples"}},[t._v("#")]),t._v(" React Native examples:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/downloads/reactNativeApp_v0.1.0.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Native example"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"install-the-example-yarn-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-the-example-yarn-setup"}},[t._v("#")]),t._v(" Install the example: "),s("code",[t._v("yarn setup")])]),t._v(" "),s("h4",{attrs:{id:"run-the-example-yarn-ios-or-yarn-android"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-the-example-yarn-ios-or-yarn-android"}},[t._v("#")]),t._v(" Run the example: "),s("code",[t._v("yarn ios")]),t._v(" or "),s("code",[t._v("yarn android")])])])}),[],!1,null,null,null);a.default=n.exports}}]);